<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–£–º–Ω—ã–π —Å–≤–µ—Ç–∏–ª—å–Ω–∏–∫ | –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è</title>
    <meta name="description" content="–°–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —É–º–Ω—ã–º –æ—Å–≤–µ—â–µ–Ω–∏–µ–º —Å –∫–æ–Ω—Ç—Ä–æ–ª–µ–º —è—Ä–∫–æ—Å—Ç–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏—è">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --bg-primary: #111113;
            --bg-surface: #1C1C1E;
            --bg-elevated: #252527;
            --border-color: #38383A;
            --text-primary: #F2F2F7;
            --text-secondary: #98989F;
            --accent-green: #32D74B;
            --accent-purple: #BF5AF2;
            --radius: 8px;
            --transition: all 0.3s ease;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background-color: var(--bg-primary);
            color: var(--text-primary);
            padding: 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            margin-bottom: 40px;
        }

        h1 {
            font-size: 32px;
            font-weight: 700;
            margin-bottom: 16px;
            background: linear-gradient(135deg, var(--accent-green), var(--accent-purple));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .current-time {
            font-size: 48px;
            font-weight: 300;
            letter-spacing: 2px;
            color: var(--text-primary);
        }

        .status-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .status-card {
            background: var(--bg-surface);
            border-radius: var(--radius);
            padding: 24px;
            border: 1px solid var(--border-color);
            transition: var(--transition);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.4);
        }

        .status-card:hover {
            transform: translateY(-4px) scale(1.02);
            box-shadow: 0 0 30px rgba(50, 215, 75, 0.3);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }

        .card-label {
            color: var(--text-secondary);
            font-size: 14px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .card-icon {
            font-size: 24px;
        }

        .card-value {
            font-size: 32px;
            font-weight: 700;
            margin-bottom: 8px;
        }

        .card-subtitle {
            color: var(--text-secondary);
            font-size: 12px;
        }

        .progress-bar {
            margin-top: 16px;
            height: 6px;
            background: var(--bg-elevated);
            border-radius: 3px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: var(--accent-green);
            transition: width 0.5s ease-out;
            border-radius: 3px;
        }

        .mode-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: var(--accent-green);
            margin-left: 8px;
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .control-panel {
            background: var(--bg-surface);
            border-radius: var(--radius);
            padding: 32px;
            border: 1px solid var(--border-color);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.4);
        }

        .brightness-control {
            margin-bottom: 32px;
        }

        .brightness-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
        }

        .brightness-title {
            font-size: 20px;
            font-weight: 600;
        }

        .brightness-value {
            font-size: 32px;
            font-weight: 700;
            color: var(--accent-green);
        }

        .slider-container {
            position: relative;
            margin-bottom: 8px;
        }

        input[type="range"] {
            width: 100%;
            height: 8px;
            border-radius: 4px;
            background: var(--bg-elevated);
            outline: none;
            -webkit-appearance: none;
            cursor: pointer;
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: var(--accent-green);
            cursor: pointer;
            box-shadow: 0 0 20px rgba(50, 215, 75, 0.5);
            transition: var(--transition);
        }

        input[type="range"]::-webkit-slider-thumb:hover {
            transform: scale(1.2);
            box-shadow: 0 0 30px rgba(50, 215, 75, 0.8);
        }

        input[type="range"]::-moz-range-thumb {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: var(--accent-green);
            cursor: pointer;
            border: none;
            box-shadow: 0 0 20px rgba(50, 215, 75, 0.5);
            transition: var(--transition);
        }

        input[type="range"]::-moz-range-thumb:hover {
            transform: scale(1.2);
            box-shadow: 0 0 30px rgba(50, 215, 75, 0.8);
        }

        .slider-labels {
            display: flex;
            justify-content: space-between;
            color: var(--text-secondary);
            font-size: 12px;
        }

        .toggle-button {
            width: 100%;
            padding: 16px 32px;
            font-size: 18px;
            font-weight: 600;
            color: var(--text-primary);
            background: linear-gradient(135deg, var(--accent-green), var(--accent-purple));
            border: none;
            border-radius: var(--radius);
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
        }

        .toggle-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 30px rgba(50, 215, 75, 0.4);
        }

        .toggle-button:active {
            transform: translateY(0);
        }

        .toast {
            position: fixed;
            bottom: 24px;
            right: 24px;
            background: var(--bg-surface);
            border: 1px solid var(--border-color);
            border-radius: var(--radius);
            padding: 16px 24px;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.6);
            transform: translateY(100px);
            opacity: 0;
            transition: var(--transition);
            z-index: 1000;
        }

        .toast.show {
            transform: translateY(0);
            opacity: 1;
        }

        @media (max-width: 768px) {
            .status-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .current-time {
                font-size: 36px;
            }

            h1 {
                font-size: 24px;
            }
        }

        @media (min-width: 1024px) {
            .status-grid {
                grid-template-columns: repeat(4, 1fr);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üåü –£–º–Ω—ã–π —Å–≤–µ—Ç–∏–ª—å–Ω–∏–∫</h1>
            <div class="current-time" id="headerTime">--:--:--</div>
        </header>

        <div class="status-grid">
            <div class="status-card">
                <div class="card-header">
                    <span class="card-label">–í—Ä–µ–º—è</span>
                    <span class="card-icon">üïê</span>
                </div>
                <div class="card-value" id="timeValue">--:--:--</div>
                <div class="card-subtitle">–°–∏—Å—Ç–µ–º–Ω–æ–µ –≤—Ä–µ–º—è</div>
            </div>

            <div class="status-card">
                <div class="card-header">
                    <span class="card-label">–†–µ–∂–∏–º</span>
                    <span class="card-icon">‚öôÔ∏è</span>
                </div>
                <div class="card-value">
                    –†—É—á–Ω–æ–π<span class="mode-indicator"></span>
                </div>
                <div class="card-subtitle">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</div>
            </div>

            <div class="status-card">
                <div class="card-header">
                    <span class="card-label">–Ø—Ä–∫–æ—Å—Ç—å</span>
                    <span class="card-icon">üí°</span>
                </div>
                <div class="card-value" id="brightnessDisplay">75%</div>
                <div class="card-subtitle">–¢–µ–∫—É—â–∏–π —É—Ä–æ–≤–µ–Ω—å</div>
                <div class="progress-bar">
                    <div class="progress-fill" id="brightnessProgress" style="width: 75%"></div>
                </div>
            </div>

            <div class="status-card">
                <div class="card-header">
                    <span class="card-label">–ë–∞—Ç–∞—Ä–µ—è</span>
                    <span class="card-icon" id="batteryIcon">üîã</span>
                </div>
                <div class="card-value" id="batteryValue">85%</div>
                <div class="card-subtitle" id="voltageValue">12.5V</div>
                <div class="progress-bar">
                    <div class="progress-fill" id="batteryProgress" style="width: 85%"></div>
                </div>
            </div>
        </div>

        <div class="control-panel">
            <div class="brightness-control">
                <div class="brightness-header">
                    <span class="brightness-title">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —è—Ä–∫–æ—Å—Ç—å—é</span>
                    <span class="brightness-value" id="brightnessValue">75%</span>
                </div>
                <div class="slider-container">
                    <input type="range" id="brightnessSlider" min="0" max="100" value="75">
                </div>
                <div class="slider-labels">
                    <span>0%</span>
                    <span>50%</span>
                    <span>100%</span>
                </div>
            </div>

            <button class="toggle-button" id="toggleButton">
                <span id="buttonIcon">üí°</span>
                <span id="buttonText">–í—ã–∫–ª—é—á–∏—Ç—å —Å–≤–µ—Ç</span>
            </button>
        </div>

        <div class="toast" id="toast">
            <span id="toastMessage"></span>
        </div>
    </div>

    <script>
        // –°–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
        let state = {
            brightness: 75,
            isLightOn: true,
            battery: 85,
            voltage: 12.5
        };

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏
        function updateTime() {
            const now = new Date();
            const timeString = now.toLocaleTimeString('ru-RU');
            document.getElementById('headerTime').textContent = timeString;
            document.getElementById('timeValue').textContent = timeString;
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —è—Ä–∫–æ—Å—Ç–∏
        function updateBrightness(value) {
            state.brightness = parseInt(value);
            document.getElementById('brightnessValue').textContent = state.brightness + '%';
            document.getElementById('brightnessDisplay').textContent = state.brightness + '%';
            document.getElementById('brightnessProgress').style.width = state.brightness + '%';
            
            console.log('–Ø—Ä–∫–æ—Å—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∞ –Ω–∞:', state.brightness);
            
            // –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –Ω–∞ ESP
            // fetch('/api/brightness', { method: 'POST', body: JSON.stringify({ value: state.brightness }) });
        }

        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Å–≤–µ—Ç–∞
        function toggleLight() {
            state.isLightOn = !state.isLightOn;
            const button = document.getElementById('toggleButton');
            const buttonText = document.getElementById('buttonText');
            const buttonIcon = document.getElementById('buttonIcon');
            
            if (state.isLightOn) {
                buttonText.textContent = '–í—ã–∫–ª—é—á–∏—Ç—å —Å–≤–µ—Ç';
                buttonIcon.textContent = 'üí°';
                showToast('–°–≤–µ—Ç –≤–∫–ª—é—á–µ–Ω');
                if (state.brightness === 0) {
                    updateBrightness(75);
                    document.getElementById('brightnessSlider').value = 75;
                }
            } else {
                buttonText.textContent = '–í–∫–ª—é—á–∏—Ç—å —Å–≤–µ—Ç';
                buttonIcon.textContent = 'üåô';
                showToast('–°–≤–µ—Ç –≤—ã–∫–ª—é—á–µ–Ω');
                updateBrightness(0);
                document.getElementById('brightnessSlider').value = 0;
            }
            
            console.log('–°–≤–µ—Ç:', state.isLightOn ? '–í–∫–ª—é—á–µ–Ω' : '–í—ã–∫–ª—é—á–µ–Ω');
            
            // –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –Ω–∞ ESP
            // fetch('/api/toggle', { method: 'POST', body: JSON.stringify({ on: state.isLightOn }) });
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å toast —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
        function showToast(message) {
            const toast = document.getElementById('toast');
            const toastMessage = document.getElementById('toastMessage');
            toastMessage.textContent = message;
            toast.classList.add('show');
            
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –±–∞—Ç–∞—Ä–µ–∏ (—Å–∏–º—É–ª—è—Ü–∏—è)
        function updateBatteryStatus() {
            // –°–∏–º—É–ª—è—Ü–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –±–∞—Ç–∞—Ä–µ–∏ (–≤ —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏—Ö–æ–¥—è—Ç —Å ESP)
            state.battery = Math.max(20, Math.min(100, state.battery + (Math.random() - 0.5) * 2));
            state.voltage = 11.0 + (state.battery / 100) * 2.0;
            
            document.getElementById('batteryValue').textContent = Math.round(state.battery) + '%';
            document.getElementById('voltageValue').textContent = state.voltage.toFixed(1) + 'V';
            document.getElementById('batteryProgress').style.width = state.battery + '%';
            
            // –ò–∑–º–µ–Ω–µ–Ω–∏–µ –∏–∫–æ–Ω–∫–∏ –±–∞—Ç–∞—Ä–µ–∏
            const batteryIcon = document.getElementById('batteryIcon');
            if (state.battery < 20) {
                batteryIcon.textContent = 'ü™´';
            } else if (state.battery > 90) {
                batteryIcon.textContent = '‚ö°';
            } else {
                batteryIcon.textContent = 'üîã';
            }
        }

        // –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö —Å ESP (–ø—Ä–∏–º–µ—Ä —Ñ—É–Ω–∫—Ü–∏–∏)
        async function fetchStatus() {
            try {
                // –†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ URL –≤–∞—à–µ–≥–æ ESP —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
                // const response = await fetch('http://YOUR_ESP_IP/api/status');
                // const data = await response.json();
                // 
                // state.brightness = data.brightness;
                // state.battery = data.battery;
                // state.voltage = data.voltage;
                // state.isLightOn = data.isOn;
                // 
                // updateBrightness(state.brightness);
                // document.getElementById('brightnessSlider').value = state.brightness;
                
                console.log('–°—Ç–∞—Ç—É—Å –æ–±–Ω–æ–≤–ª–µ–Ω');
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —Å—Ç–∞—Ç—É—Å–∞:', error);
            }
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        document.addEventListener('DOMContentLoaded', () => {
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É
            updateTime();
            setInterval(updateTime, 1000);
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∞—Ç–∞—Ä–µ–∏ –∫–∞–∂–¥—ã–µ 2 —Å–µ–∫—É–Ω–¥—ã (—Å–∏–º—É–ª—è—Ü–∏—è)
            setInterval(updateBatteryStatus, 2000);
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –ø–æ–ª–∑—É–Ω–∫–∞ —è—Ä–∫–æ—Å—Ç–∏
            const slider = document.getElementById('brightnessSlider');
            slider.addEventListener('input', (e) => {
                updateBrightness(e.target.value);
            });
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è
            document.getElementById('toggleButton').addEventListener('click', toggleLight);
            
            // –ü–æ–ª—É—á–µ–Ω–∏–µ –Ω–∞—á–∞–ª—å–Ω–æ–≥–æ —Å—Ç–∞—Ç—É—Å–∞ (—Ä–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –ø—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ –∫ ESP)
            // fetchStatus();
            // setInterval(fetchStatus, 2000);
            
            console.log('–ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞');
        });
    </script>
</body>
</html>